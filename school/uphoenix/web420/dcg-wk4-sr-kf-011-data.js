/**
 * dcg-wk4-sr-kf-011-data.js (file 04 of 05)
 * Week 4 Assignment
 * David C. Gibbons
 * WEB/420 - Web Programming II
 * Vladimir Gubanov
 * November 13, 2006
 */

/**
 * Function to populate all necessary dynamic data in the body
 * when the page is loaded.
 */
function populateBody()
{
  var formAlreadySubmitted = false;

  // decode the document's cookies and look for our 
  // previously submitted flag cookie
  var cookies = decodeURI(document.cookie).split("; ");
  for (var i = 0; i < cookies.length; i++)
  {
    var cookie = cookies[i];
    var equalPos = cookie.indexOf("=");
    var cookieName = cookie.substring(0, equalPos);
    var cookieValue = cookie.substring(equalPos + 1);
    if (cookieName == "contact.info.submitted")
    {
      if (cookieValue == "true")
      {
        formAlreadySubmitted = true;
        break;
      }
    }
  }

  // if the user already provided us with their contact information
  // then replace the form div with a message to let them know!
  if (formAlreadySubmitted)
  {
    var formDiv = document.getElementById("contactInfoForm");
    formDiv.innerHTML = "<p><strong>" +
      "Sorry, but you've already provided us with your contact information! " +
      "There's no reason to resubmit this information to us!" +
      "</strong></p>" +
      "<p>Thanks!</p>";
  }
  else
  {
    populateStates();
  }

  return true;
}

/**
 * A function to populate the list of states on the form. This would
 * normally be likely generated by a server-side script that read
 * the list of states from a database, but since this is a JavaScript
 * class and this is more fun than just listing the raw HTML...
 *
 * State/possession names and abbreviations retrieved from the official
 * United States Postal Service at 
 * http://www.usps.com/ncsc/lookups/usps_abbreviations.html
 */
function populateStates()
{
  // clear out any existing options just in case the HTML document has any
  document.forms[0].state.length = 0;

  var i = 0;
  document.forms[0].state.options[i++] = new Option("Alabama", "AL", false, false);
  document.forms[0].state.options[i++] = new Option("Alaska", "AK", false, false),
  document.forms[0].state.options[i++] = new Option("America Samoa", "AS", false, false);
  document.forms[0].state.options[i++] = new Option("Arizona", "AZ", false, false);
  document.forms[0].state.options[i++] = new Option("Arkansas", "AR", false, false);
  document.forms[0].state.options[i++] = new Option("California", "CA", false, false);
  document.forms[0].state.options[i++] = new Option("Colorado", "CO", false, false);
  document.forms[0].state.options[i++] = new Option("Connecticut", "CT", false, false);
  document.forms[0].state.options[i++] = new Option("Delaware", "DE", false, false);
  document.forms[0].state.options[i++] = new Option("District of Columbia", "DC", false, false);
  document.forms[0].state.options[i++] = new Option("Federated States of Micronesia", "FM", false, false);
  document.forms[0].state.options[i++] = new Option("Florida", "FL", false, false);
  document.forms[0].state.options[i++] = new Option("Geogria", "GA", false, false);
  document.forms[0].state.options[i++] = new Option("Guam", "GA", false, false);
  document.forms[0].state.options[i++] = new Option("Hawaii", "HI", false, false);
  document.forms[0].state.options[i++] = new Option("Idaho", "ID", false, false);
  document.forms[0].state.options[i++] = new Option("Illinois", "IL", false, false);
  document.forms[0].state.options[i++] = new Option("Indiana", "IN", false, false);
  document.forms[0].state.options[i++] = new Option("Iowa", "IA", false, false);
  document.forms[0].state.options[i++] = new Option("Kansas", "KS", false, false);
  document.forms[0].state.options[i++] = new Option("Kentucky", "KY", false, false);
  document.forms[0].state.options[i++] = new Option("Louisiana", "LA", false, false);
  document.forms[0].state.options[i++] = new Option("Maine", "ME", false, false);
  document.forms[0].state.options[i++] = new Option("Marshall Islands", "MH", false, false);
  document.forms[0].state.options[i++] = new Option("Maryland", "MD", false, false);
  document.forms[0].state.options[i++] = new Option("Massachusetts", "MA", false, false);
  document.forms[0].state.options[i++] = new Option("Michigan", "MI", false, false);
  document.forms[0].state.options[i++] = new Option("Minesota", "MN", false, false);
  document.forms[0].state.options[i++] = new Option("Mississippi", "MS", false, false);
  document.forms[0].state.options[i++] = new Option("Missouri", "MO", false, false);
  document.forms[0].state.options[i++] = new Option("Montana", "MT", false, false);
  document.forms[0].state.options[i++] = new Option("Nebraska", "NE", false, false);
  document.forms[0].state.options[i++] = new Option("Nevada", "NV", false, false);
  document.forms[0].state.options[i++] = new Option("New Hampshire", "NH", false, false);
  document.forms[0].state.options[i++] = new Option("New Jersey", "NJ", false, false);
  document.forms[0].state.options[i++] = new Option("New Mexico", "NM", false, false);
  document.forms[0].state.options[i++] = new Option("New York", "NY", false, false);
  document.forms[0].state.options[i++] = new Option("North Carolina", "NC", false, false);
  document.forms[0].state.options[i++] = new Option("North Dakota", "ND", false, false);
  document.forms[0].state.options[i++] = new Option("Northern Mariana Islands", false, false);
  document.forms[0].state.options[i++] = new Option("Ohio", "OH", false, false);
  document.forms[0].state.options[i++] = new Option("Oklahoma", "OK", false, false);
  document.forms[0].state.options[i++] = new Option("Oregon", "OR", false, false);
  document.forms[0].state.options[i++] = new Option("Palau", "PW", false, false);
  document.forms[0].state.options[i++] = new Option("Pennsylvania", "PA", false, false);
  document.forms[0].state.options[i++] = new Option("Puerto Rico", "PR", false, false);
  document.forms[0].state.options[i++] = new Option("Rhode Island", "RI", false, false);
  document.forms[0].state.options[i++] = new Option("South Carolina", "SC", false, false);
  document.forms[0].state.options[i++] = new Option("South Dakota", "SD", false, false);
  document.forms[0].state.options[i++] = new Option("Tennessee", "TN", false, false);
  document.forms[0].state.options[i++] = new Option("Texas", "TX", false, false);
  document.forms[0].state.options[i++] = new Option("Utah", "UT", false, false);
  document.forms[0].state.options[i++] = new Option("Vermont", "VT", false, false);
  document.forms[0].state.options[i++] = new Option("Virgin Islands", "VI", false, false);
  document.forms[0].state.options[i++] = new Option("Virginia", "VA", false, false);
  document.forms[0].state.options[i++] = new Option("Washington", "WA", false, false);
  document.forms[0].state.options[i++] = new Option("West Virginia", "WV", false, false);
  document.forms[0].state.options[i++] = new Option("Wisconsin", "WI", false, false);
  document.forms[0].state.options[i++] = new Option("Wyoming", "WY", false, false);
  document.forms[0].state.options[i++] = new Option("Armed Forces Africa", "AE", false, false);
  document.forms[0].state.options[i++] = new Option("Armed Forces Americas", "AA", false, false);
  document.forms[0].state.options[i++] = new Option("Armed Forces Canada", "AE", false, false);
  document.forms[0].state.options[i++] = new Option("Armed Forces Europe", "AE", false, false);
  document.forms[0].state.options[i++] = new Option("Armed Forces Middle East", "AE", false, false);
  document.forms[0].state.options[i++] = new Option("Armed Forces Pacific", "AP", false, false);

  return true;
}

